<!DOCTYPE html>
<html>
  <head>
    <!-- Separate webcomponents polyfill bundle for Edge, IE11, etc. -->
    <script type="text/javascript" src="../../node_modules/@webcomponents/webcomponentsjs/webcomponents-bundle.js"></script>

    <!-- The ESM "vanilla" version of the component for FF, Safari, Chrome and Edge -->
    <script type="module" src="../../dist/slotify.js"></script>

    <!-- A babel-compiled version of the component for IE11 -->
    <script nomodule type="text/javascript" src="../../dist/slotify-legacy.js"></script>

    <script type="module">
      import { Slotify } from "../../dist/slotify.js";
      
      export class MyCheeseburger extends Slotify(LitElement) {
        render() {
          return html`
            <h1 class="esds-slotify">Welcome to Burgersville</h1>
            <s-slot name="top-bun"></s-slot>
            <s-slot name="cheese">No cheese? So sad :(</s-slot>
            <s-slot></s-slot>
            <br/>
            <s-slot name="special-sauce">Some default special sauce</s-slot>
            <s-slot name="bottom-bun"></s-slot>
            <h2>PLATE FOR THE BURGER</h2>
          `;
        }
      }
    </script>
  </head>
  <body>
    <h1>Welcome to your new web component.</h1>
    There are only three requirements to make a lit-element web component work all the way down to IE11:
    <ol>
      <li><code>@webcomponents/webcomponentsjs</code> is needed to enable custom elements in IE11 and Edge 18 and lower</li>
      <li>
        Rollup is needed because <code>slotify-entry.js</code> uses an import statement to pull in the EsdsSlotify class from a separate file.<br/>
        IE11 doesn't support JS imports so this rollup is needed to bundle those two files into one.<br/>
        Rollup is also used to create a bundle for modern browsers that includes LitElement and all its dependencies.
      </li>
      <li>Babel is needed to compile the ES6 code down to ES5 code so IE11 will work</li>
    </ol>
    <div style="display: flex">
      <div>
        <div id="table" style="border: solid 1px red; width: 200px; min-height: 200px;">
          <my-cheeseburger>
            <div slot="bottom-bun">BUN BOTTOM</div>
            <div slot="top-bun">BUN TOP</div>
            Meat, pickles, lettuce, tomato
            <div slot="cheese">CHEESE</div>
          </my-cheeseburger>
        </div>

        <div id="bag" style="border: solid 1px black; width: 200px; min-height: 200px;"></div>
      </div>
      <div>
        <button class="add-cheese">Add Extra Cheese</button>
        <button class="remove-cheese">Remove Cheese</button>
        <button class="move-it">Move the Burger</button>
      </div>
    </div>


    <script>
      const button = document.querySelector('.add-cheese');
      const burger = document.querySelector('my-cheeseburger');
      button.addEventListener('click', function(){
        const moreCheese = document.createElement('div');
        moreCheese.setAttribute('slot', 'cheese');
        moreCheese.textContent = "EXTRA CHEESE";
        burger.appendChild(moreCheese);
      });

      const removeCheese = document.querySelector('.remove-cheese');
      removeCheese.addEventListener('click', function(){
        const cheese = burger.querySelector('*[slot="cheese"]');
        if (cheese) {
          cheese.parentElement.removeChild(cheese);
        }
      });

      // Move the custom element
      const bag = document.getElementById('bag');
      const table = document.getElementById('table');
      const moveItButton = document.querySelector('.move-it');
      moveItButton.addEventListener('click', function(){
        console.log(burger);
        if (table.querySelector('my-cheeseburger')) {
          bag.appendChild(burger);
        } else {
          table.appendChild(burger);
        }
      });
    </script>
  </body>
</html>
